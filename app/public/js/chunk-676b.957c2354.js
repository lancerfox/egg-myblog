(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-676b"],{"354e":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"manager-list"},[o("Card",[o("div",{staticClass:"operating-area"},[o("Row",[o("Col",{attrs:{span:"6"}},[o("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入关键字搜索"}})],1),o("Col",{attrs:{span:"6"}},[o("span",{staticStyle:{margin:"0 10px"}},[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.clickroleAdd()}}},[t._v("添加角色")])],1)])],1)],1),o("div",{staticClass:"showtable-area"},[o("Table",{attrs:{border:"",columns:t.columns7,data:t.datalist}})],1),o("Row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",justify:"center",align:"middle"}},[o("Page",{attrs:{total:t.total_count,"page-size":10},on:{"on-change":t.changePage}})],1),o("RoleAdd",{ref:"c_roleAdd",attrs:{modal:t.isShowAddModal},on:{clickHide:t.hideAddModal,_sumit:t.sumitAdd}}),o("RoleEditor",{ref:"c_roleEditor",attrs:{modal:t.isShowEditorModal,oldTitle:t.roletitle},on:{clickHide:t.hideEditorModal,_sumit:t.sumitEditor}}),o("Accredit",{ref:"c_Accredit",attrs:{modal:t.isShowAccreditModal,treeData:t.treeData},on:{clickHide:t.hideAccreditModal,_sumit:t.sumitAccredit}})],1)],1)},i=[],n=(o("96cf"),o("3040")),s=(o("bc3a"),o("c276")),a=o("e069"),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Modal",{attrs:{width:"600",closable:!1,"mask-closable":!1},on:{"on-visible-change":t.watcherState},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("span",[t._v("操作")])]),o("Form",{ref:"roleaddformCustom",attrs:{"label-width":150,"label-position":"right",model:t.formCustom,rules:t.ruleCustom}},[o("FormItem",{attrs:{label:"名称：",prop:"title"}},[o("div",{staticStyle:{display:"inline-block",width:"300px"}},[o("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.formCustom.title,callback:function(e){t.$set(t.formCustom,"title",e)},expression:"formCustom.title"}})],1)])],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"confirmAdd",attrs:{type:"primary"},on:{click:function(e){t.confirmAdd()}}},[t._v("确定")]),o("Button",{on:{click:function(e){t.clickHideModal()}}},[t._v("取消")])],1)],1)],1)},c=[],d={components:{Modal:a["Modal"],Form:a["Form"],FormItem:a["FormItem"],Input:a["Input"]},props:{modal:{type:Boolean,default:function(){return!1}}},data:function(){var t=function(t,e,o){if(""===e)o(new Error("请输入名称"));else{var r=/^[a-zA-Z0-9\u4e00-\u9fa5]{1,8}$/;0==r.test(e)&&o(new Error("名称只能输入1-8个由字母、数字、汉字组成的字符")),o()}};return{formCustom:{title:""},ruleCustom:{title:[{validator:t,trigger:"blur",required:!0}]}}},methods:{confirmAdd:function(){var t=this;this.$refs.roleaddformCustom.validate(function(e){console.log(e),e&&t.$emit("_sumit",{title:t.formCustom.title})})},clickHideModal:function(){this.$emit("clickHide")},watcherState:function(t){!1===t&&this.$emit("clickHide")},clearFrom:function(){this.formCustom.title="",console.log("表单已经清空")}}},u=d,m=o("2877"),h=Object(m["a"])(u,l,c,!1,null,null,null);h.options.__file="role-add.vue";var f=h.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Modal",{attrs:{width:"600",closable:!1,"mask-closable":!1},on:{"on-visible-change":t.watcherState},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("span",[t._v("操作编辑")])]),o("Form",{ref:"roleaddformCustom",attrs:{"label-width":150,"label-position":"right",model:t.formCustom,rules:t.ruleCustom}},[o("FormItem",{attrs:{label:"名称：",prop:"title"}},[o("div",{staticStyle:{display:"inline-block",width:"300px"}},[o("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.formCustom.title,callback:function(e){t.$set(t.formCustom,"title",e)},expression:"formCustom.title"}})],1)])],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.confirmAdd()}}},[t._v("确定")]),o("Button",{on:{click:function(e){t.clickHideModal()}}},[t._v("取消")])],1)],1)],1)},g=[],w={components:{Modal:a["Modal"],Form:a["Form"],FormItem:a["FormItem"],Input:a["Input"]},props:{modal:{type:Boolean,default:function(){return!1}},oldTitle:{type:String,default:function(){return""}}},data:function(){var t=function(t,e,o){if(""===e)o(new Error("请输入名称"));else{var r=/^[a-zA-Z0-9\u4e00-\u9fa5]{1,8}$/;0==r.test(e)&&o(new Error("名称只能输入1-8个由字母、数字、汉字组成的字符")),o()}};return{formCustom:{title:""},ruleCustom:{title:[{validator:t,trigger:"blur",required:!0}]}}},watch:{oldTitle:function(t,e){this.formCustom.title=t}},methods:{confirmAdd:function(){var t=this;this.$refs.roleaddformCustom.validate(function(e){console.log(e),e&&t.$emit("_sumit",{title:t.formCustom.title})})},clickHideModal:function(){this.$emit("clickHide")},watcherState:function(t){!1===t&&this.$emit("clickHide")},clearFrom:function(){this.formCustom.title="",console.log("表单已经清空")}}},v=w,k=Object(m["a"])(v,p,g,!1,null,null,null);k.options.__file="role-editor.vue";var _=k.exports,b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Modal",{attrs:{width:"600",closable:!1,"mask-closable":!1},on:{"on-visible-change":t.watcherState},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("span",[t._v("授权")])]),o("Tree",{attrs:{data:t.treeData,"show-checkbox":""}}),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"confirmAdd",attrs:{type:"primary"},on:{click:function(e){t.confirmAdd()}}},[t._v("确定")]),o("Button",{on:{click:function(e){t.clickHideModal()}}},[t._v("取消")])],1)],1)],1)},M=[],$={components:{Modal:a["Modal"],Tree:a["Tree"],Button:a["Button"]},props:{modal:{type:Boolean,default:function(){return!1}},treeData:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{confirmAdd:function(){this.$emit("_sumit",this.treeData)},clickHideModal:function(){this.$emit("clickHide")},watcherState:function(t){!1===t&&this.$emit("clickHide")},clearFrom:function(){this.treeData=[],console.log("表单已经清空")}}},A=$,y=Object(m["a"])(A,b,M,!1,null,null,null);y.options.__file="accredit.vue";var C=y.exports,x=function(t){for(var e=[],o=0;o<t.length;o++)!0===t[o].checked&&e.push(t[o].id);return e},S=function(t,e){for(var o=0;o<t.length;o++)-1!=e.indexOf(t[o].id)?t[o].checked=!0:t[o].checked=!1;return t},R={components:{Card:a["Card"],Row:a["Row"],Col:a["Col"],RoleAdd:f,RoleEditor:_,Accredit:C},computed:{datalist:function(){return this.$store.state.role.rolelist},total_count:function(){return this.$store.state.role.total_count},resourcelist:function(){return this.$store.state.resource.resourcelist}},data:function(){var t=this;return{isShowAddModal:!1,isShowEditorModal:!1,isShowAccreditModal:!1,current_page:1,roletitle:"",rowId:"",powers:[],treeData:[],columns7:[{title:"用户名",key:"title"},{title:"创建时间",key:"createdate"},{title:"操作",key:"action",width:250,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.clickroleEditor(o)}}},"编辑"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.clickroleAccredit(o.row)}}},"授权"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.$Modal.confirm({title:"删除提示",content:"您确定要删除吗？",loading:!0,onOk:function(){t.remove(o.row.id)},onCancel:function(){}})}}},"删除")])}}],treeDataList:[]}},methods:{getRoleList:function(){var t="currentPage="+this.current_page;this.$store.dispatch("get_rolelist",t)},get_resourcelist:function(){this.$store.dispatch("get_resourcelist")},changePage:function(t){this.current_page=t,this.getuserList()},remove:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var o,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o={id:e},t.next=3,this.$store.dispatch("delete_role",o);case 3:r=t.sent,i=r.data,0===i.error?(this.getRoleList(),this.$Message.success({content:"删除成功",duration:5})):(console.log(i.message),this.$Message.error({content:"删除失败！"+i.message,duration:5})),this.$Modal.remove();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),clickroleAdd:function(){this.isShowAddModal=!0},sumitAdd:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var o,r,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.title,r={title:o},t.next=4,this.$store.dispatch("create_role",r);case 4:i=t.sent,n=i.data,0===n.error?(this.getRoleList(),this.$Message.success({content:"添加成功",duration:5})):this.$Message.error({content:"添加失败！"+n.message,duration:5}),this.isShowAddModal=!1,this.$refs.c_roleAdd.clearFrom();case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),hideAddModal:function(){this.isShowAddModal=!1},clickroleEditor:function(t){this.roletitle=t.row.title,this.rowId=t.row.id,this.isShowEditorModal=!0},sumitEditor:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var o,r,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.title,r={title:o,id:this.rowId},t.next=4,this.$store.dispatch("editor_role",r);case 4:i=t.sent,n=i.data,0===n.error?(this.getRoleList(),this.$Message.success({content:"添加成功",duration:5})):this.$Message.error({content:"添加失败！"+n.message,duration:5}),this.isShowEditorModal=!1,this.$refs.c_roleEditor.clearFrom();case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),hideEditorModal:function(){this.isShowEditorModal=!1},clickroleAccredit:function(t){this.powers=t.powers,this.rowId=t.id,this.treeData=Object(s["b"])(S(Object(s["c"])(this.$store.state.resource.resourcelist),this.powers)),console.log(this.treeData),this.isShowAccreditModal=!0},sumitAccredit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var o,r,i,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=Object(s["n"])(Object(s["c"])(e)),console.log(o),r=x(o),i={powers:r,id:this.rowId},t.next=6,this.$store.dispatch("updata_power",i);case 6:n=t.sent,a=n.data,0===a.error?(this.isShowAccreditModal=!1,this.getRoleList(),this.$Message.success({content:"添加成功",duration:5})):this.$Message.error({content:"添加失败！"+a.message,duration:5});case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),hideAccreditModal:function(){this.isShowAccreditModal=!1}},mounted:function(){this.getRoleList(),this.get_resourcelist()}},E=R,I=(o("8f0d"),Object(m["a"])(E,r,i,!1,null,null,null));I.options.__file="role-list.vue";e["default"]=I.exports},"8f0d":function(t,e,o){"use strict";var r=o("c753"),i=o.n(r);i.a},c753:function(t,e,o){}}]);